# Proposal: Jellyfin ê¸°ë°˜ ì•„í‚¤í…ì²˜ ì „í™˜

**Version**: 1.2.0 | **Date**: 2025-12-10 | **Status**: âœ… Approved (Phase 3 ì™„ë£Œ - ë‹¨ì¼ ì•„í‚¤í…ì²˜ ë‹¬ì„±)

> Docker ìŠ¤íŠ¸ë¦¬ë° ì œí•œ í•´ê²°ì„ ìœ„í•œ Jellyfin + ì»¤ìŠ¤í…€ í”ŒëŸ¬ê·¸ì¸ ì „í™˜ ì œì•ˆì„œ

---

## ëª©ì°¨

1. [ë°°ê²½ ë° ë¬¸ì œ ì •ì˜](#1-ë°°ê²½-ë°-ë¬¸ì œ-ì •ì˜)
2. [ì œì•ˆ ì†”ë£¨ì…˜](#2-ì œì•ˆ-ì†”ë£¨ì…˜)
3. [ì•„í‚¤í…ì²˜ ë¹„êµ](#3-ì•„í‚¤í…ì²˜-ë¹„êµ)
4. [ì½”ë“œ ë³€ê²½ ë²”ìœ„](#4-ì½”ë“œ-ë³€ê²½-ë²”ìœ„)
5. [ë¸”ë¡í™” ì¶©ëŒ ë¶„ì„](#5-ë¸”ë¡í™”-ì¶©ëŒ-ë¶„ì„)
6. [ì—ì´ì „íŠ¸ í•„ìš” ê²€í† ](#6-ì—ì´ì „íŠ¸-í•„ìš”-ê²€í† )
7. [ë§ˆì´ê·¸ë ˆì´ì…˜ ë¡œë“œë§µ](#7-ë§ˆì´ê·¸ë ˆì´ì…˜-ë¡œë“œë§µ)
8. [ë¦¬ìŠ¤í¬ ë¶„ì„](#8-ë¦¬ìŠ¤í¬-ë¶„ì„)
9. [ê²°ì • ì‚¬í•­](#9-ê²°ì •-ì‚¬í•­)
10. [êµ¬í˜„ í˜„í™©](#10-êµ¬í˜„-í˜„í™©) âœ¨ NEW

---

## 1. ë°°ê²½ ë° ë¬¸ì œ ì •ì˜

### 1.1 í˜„ì¬ ë¬¸ì œ

| ë¬¸ì œ | ì›ì¸ | ì˜í–¥ |
|------|------|------|
| **Docker SMB ë§ˆìš´íŠ¸ ë¶ˆê°€** | Docker Desktop WSL2ëŠ” Windows ë„¤íŠ¸ì›Œí¬ ë“œë¼ì´ë¸Œ ê³µìœ  ë¶ˆê°€ | NAS ë¹„ë””ì˜¤ ìŠ¤íŠ¸ë¦¬ë° ì‹¤íŒ¨ |
| **ê°œë°œ í™˜ê²½ ì œí•œ** | Windows + Docker ì¡°í•©ì˜ êµ¬ì¡°ì  í•œê³„ | ë¡œì»¬ í…ŒìŠ¤íŠ¸ ë¶ˆê°€ëŠ¥ |
| **í”„ë¡œë•ì…˜ ì˜ì¡´ì„±** | Linux ì„œë²„ì—ì„œë§Œ ì •ìƒ ë™ì‘ | ê°œë°œ-ìš´ì˜ í™˜ê²½ ë¶ˆì¼ì¹˜ |

### 1.2 ê²€í† ëœ ëŒ€ì•ˆ

| ëŒ€ì•ˆ | í‰ê°€ | ì±„íƒ ì—¬ë¶€ |
|------|------|----------|
| Linux ì„œë²„ ë°°í¬ | í˜„ì¬ êµ¬í˜„ ìœ ì§€ ê°€ëŠ¥, ê°œë°œ í™˜ê²½ ë¬¸ì œ ë¯¸í•´ê²° | â–³ |
| Docker CIFS ë³¼ë¥¨ | NAS ì¸ì¦ ë¬¸ì œ (`key revoked`) | âœ— |
| **Jellyfin ë„ì…** | NAS ë„¤ì´í‹°ë¸Œ ì§€ì›, í•˜ë“œì›¨ì–´ íŠ¸ëœìŠ¤ì½”ë”© ë¬´ë£Œ | âœ… ê¶Œì¥ |

---

## 2. ì œì•ˆ ì†”ë£¨ì…˜

### 2.1 Jellyfin ì„ íƒ ì´ìœ 

| ê¸°ì¤€ | Jellyfin | Plex | í˜„ì¬ ë°©ì‹ |
|------|----------|------|----------|
| **ë¼ì´ì„ ìŠ¤** | GPL-2.0 (ë¬´ë£Œ) | Freemium ($250 í‰ìƒ) | ìì²´ ê°œë°œ |
| **NAS í†µí•©** | ë„¤ì´í‹°ë¸Œ ì§€ì› | ë„¤ì´í‹°ë¸Œ ì§€ì› | Docker ì œí•œ |
| **HW íŠ¸ëœìŠ¤ì½”ë”©** | ë¬´ë£Œ | ìœ ë£Œ (Plex Pass) | FFmpeg ì§ì ‘ |
| **ì™¸ë¶€ ì˜ì¡´ì„±** | ì—†ìŒ (100% ë¡œì»¬) | Plex ê³„ì • í•„ìˆ˜ | ì—†ìŒ |
| **ì»¤ìŠ¤í„°ë§ˆì´ì§•** | í”ŒëŸ¬ê·¸ì¸ ì‹œìŠ¤í…œ | ì œí•œì  | ì™„ì „ ì œì–´ |
| **ì»¤ë®¤ë‹ˆí‹°** | â­ 37K+ GitHub | ìƒìš© | - |

### 2.2 í•˜ì´ë¸Œë¦¬ë“œ ì•„í‚¤í…ì²˜

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      WSOPTV Jellyfin Hybrid Architecture                 â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                          â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚   NAS Server    â”‚         â”‚         Jellyfin Server              â”‚   â”‚
â”‚  â”‚ (10.10.100.122) â”‚â”€â”€â”€â”€â”€â”€â”€â”€â–¶â”‚  â€¢ ë¯¸ë””ì–´ ë¼ì´ë¸ŒëŸ¬ë¦¬ ê´€ë¦¬            â”‚   â”‚
â”‚  â”‚                 â”‚         â”‚  â€¢ HW íŠ¸ëœìŠ¤ì½”ë”© (ë¬´ë£Œ)              â”‚   â”‚
â”‚  â”‚  /ARCHIVE/      â”‚         â”‚  â€¢ ì‚¬ìš©ì ì¸ì¦                       â”‚   â”‚
â”‚  â”‚  â”œâ”€â”€ WSOP/      â”‚         â”‚  â€¢ ìŠ¤íŠ¸ë¦¬ë° (HLS/DASH)               â”‚   â”‚
â”‚  â”‚  â”œâ”€â”€ HCL/       â”‚         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚  â”‚  â”œâ”€â”€ PAD/       â”‚                         â”‚                          â”‚
â”‚  â”‚  â””â”€â”€ MPP/       â”‚                         â”‚ Jellyfin API             â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                         â”‚                          â”‚
â”‚                                              â–¼                          â”‚
â”‚                              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”‚
â”‚                              â”‚      WSOPTV Backend (Slim)     â”‚         â”‚
â”‚                              â”‚  â€¢ Jellyfin API Proxy          â”‚         â”‚
â”‚                              â”‚  â€¢ í¬ì»¤ ë©”íƒ€ë°ì´í„° ê´€ë¦¬         â”‚         â”‚
â”‚                              â”‚  â€¢ MeiliSearch ê²€ìƒ‰            â”‚         â”‚
â”‚                              â”‚  â€¢ í•¸ë“œ/í”Œë ˆì´ì–´ í†µê³„          â”‚         â”‚
â”‚                              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â”‚
â”‚                                              â”‚                          â”‚
â”‚                                              â”‚ REST API                 â”‚
â”‚                                              â–¼                          â”‚
â”‚                              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”‚
â”‚                              â”‚     WSOPTV Frontend            â”‚         â”‚
â”‚                              â”‚  â€¢ SvelteKit (í˜„ì¬ ìœ ì§€)       â”‚         â”‚
â”‚                              â”‚  â€¢ Jellyfin í”Œë ˆì´ì–´ í†µí•©      â”‚         â”‚
â”‚                              â”‚  â€¢ í¬ì»¤ í•¸ë“œ íƒ€ì„ë¼ì¸          â”‚         â”‚
â”‚                              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â”‚
â”‚                                                                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 3. ì•„í‚¤í…ì²˜ ë¹„êµ

### 3.1 í˜„ì¬ ì•„í‚¤í…ì²˜

```
NAS â”€â”€(SMB)â”€â”€â–¶ Docker Container â”€â”€(FFmpeg)â”€â”€â–¶ HLS â”€â”€â–¶ Frontend
                    â†‘
              Docker Desktop
              WSL2 ë§ˆìš´íŠ¸ ì‹¤íŒ¨
```

### 3.2 Jellyfin ì•„í‚¤í…ì²˜

```
NAS â”€â”€(NFS/SMB)â”€â”€â–¶ Jellyfin (NAS ì§ì ‘ ì„¤ì¹˜) â”€â”€(HLS)â”€â”€â–¶ Frontend
                         â”‚
                    ë„¤ì´í‹°ë¸Œ ì ‘ê·¼
                    ë§ˆìš´íŠ¸ ë¬¸ì œ ì—†ìŒ
```

### 3.3 ì»´í¬ë„ŒíŠ¸ë³„ ì—­í•  ë³€í™”

> âš ï¸ **ì¤‘ìš”**: Docker ê¸°ë°˜ ë°ì´í„°ë² ì´ìŠ¤ ì„œë¹„ìŠ¤(PostgreSQL, MeiliSearch, Redis)ëŠ” **Phase 2ì—ì„œë„ ê³„ì† Docker Composeë¡œ ìš´ì˜**ë©ë‹ˆë‹¤. Jellyfinë§Œ Windows/NAS Nativeë¡œ ì„¤ì¹˜ë©ë‹ˆë‹¤.

| ì»´í¬ë„ŒíŠ¸ | ë°°í¬ ë°©ì‹ | í˜„ì¬ ì—­í•  | Jellyfin ì „í™˜ í›„ |
|---------|----------|---------|-----------------|
| **PostgreSQL** | ğŸ³ Docker (ìœ ì§€) | ëª¨ë“  ë©”íƒ€ë°ì´í„° | í¬ì»¤ ë©”íƒ€ë°ì´í„° ì „ë‹´ (í•¸ë“œ, í”Œë ˆì´ì–´, íƒ€ì„ì½”ë“œ, ì‚¬ìš©ì) |
| **MeiliSearch** | ğŸ³ Docker (ìœ ì§€) | ì „ë¬¸ ê²€ìƒ‰ | í¬ì»¤ í•¸ë“œ/í”Œë ˆì´ì–´ ê²€ìƒ‰ (ìœ ì§€) |
| **Redis** | ğŸ³ Docker (ìœ ì§€) | ìºì‹± + ì„¸ì…˜ | Jellyfin API ì‘ë‹µ ìºì‹± + ì„¸ì…˜ |
| **Backend** | ğŸ³ Docker (ìœ ì§€) | API + ìŠ¤íŠ¸ë¦¬ë° | Jellyfin Proxy + í¬ì»¤ ë©”íƒ€ API |
| **Frontend** | ğŸ³ Docker (ìœ ì§€) | ì „ì²´ UI | UI ìœ ì§€, ìŠ¤íŠ¸ë¦¬ë° URLë§Œ ë³€ê²½ |
| **Jellyfin** | ğŸ–¥ï¸ **Native ì‹ ê·œ** | - | ë¯¸ë””ì–´ ìŠ¤íŠ¸ë¦¬ë°, NAS ì§ì ‘ ì•¡ì„¸ìŠ¤, HW íŠ¸ëœìŠ¤ì½”ë”© |

### 3.4 ë°°í¬ ì•„í‚¤í…ì²˜ ìƒì„¸

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    WSOPTV Phase 2: Hybrid Deployment                         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚                    Windows Native (Docker ì™¸ë¶€)                       â”‚   â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                                 â”‚   â”‚
â”‚  â”‚  â”‚ Jellyfin Server â”‚â—€â”€â”€â”€â”€ NAS SMB ì§ì ‘ ë§ˆìš´íŠ¸ (Z:\GGPNAs)           â”‚   â”‚
â”‚  â”‚  â”‚ :8096           â”‚      (Dockerì—ì„œ ë¶ˆê°€í–ˆë˜ ë¶€ë¶„ í•´ê²°)            â”‚   â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                                 â”‚   â”‚
â”‚  â”‚           â”‚ HTTP API                                                  â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚              â”‚                                                               â”‚
â”‚              â–¼                                                               â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚                    Docker Compose (172.28.0.0/16)                     â”‚   â”‚
â”‚  â”‚                                                                       â”‚   â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”               â”‚   â”‚
â”‚  â”‚  â”‚ PostgreSQL   â”‚  â”‚ MeiliSearch  â”‚  â”‚    Redis     â”‚               â”‚   â”‚
â”‚  â”‚  â”‚ :5432        â”‚  â”‚ :7700        â”‚  â”‚ :6379        â”‚               â”‚   â”‚
â”‚  â”‚  â”‚ í¬ì»¤ ë©”íƒ€    â”‚  â”‚ ê²€ìƒ‰ ì¸ë±ìŠ¤   â”‚  â”‚ ìºì‹±/ì„¸ì…˜    â”‚               â”‚   â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜               â”‚   â”‚
â”‚  â”‚         â”‚                 â”‚                 â”‚                         â”‚   â”‚
â”‚  â”‚         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                         â”‚   â”‚
â”‚  â”‚                           â”‚                                           â”‚   â”‚
â”‚  â”‚                    â”Œâ”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”                                   â”‚   â”‚
â”‚  â”‚                    â”‚   Backend   â”‚â—€â”€â”€â”€â”€ Jellyfin API í˜¸ì¶œ            â”‚   â”‚
â”‚  â”‚                    â”‚   :8001     â”‚      (http://host.docker.internal) â”‚   â”‚
â”‚  â”‚                    â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜                                   â”‚   â”‚
â”‚  â”‚                           â”‚                                           â”‚   â”‚
â”‚  â”‚                    â”Œâ”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”                                   â”‚   â”‚
â”‚  â”‚                    â”‚  Frontend   â”‚                                   â”‚   â”‚
â”‚  â”‚                    â”‚   :3000     â”‚                                   â”‚   â”‚
â”‚  â”‚                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                   â”‚   â”‚
â”‚  â”‚                                                                       â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

[ë„¤íŠ¸ì›Œí¬ í†µì‹  ê²½ë¡œ]
â€¢ Frontend â†’ Backend: Docker ë‚´ë¶€ (172.28.2.2 â†’ 172.28.2.1)
â€¢ Backend â†’ PostgreSQL/MeiliSearch/Redis: Docker ë‚´ë¶€ (172.28.2.1 â†’ 172.28.1.x)
â€¢ Backend â†’ Jellyfin: Docker â†’ Host (host.docker.internal:8096)
â€¢ Jellyfin â†’ NAS: Windows Native SMB (Z:\GGPNAs)
```

---

## 4. ì½”ë“œ ë³€ê²½ ë²”ìœ„

### 4.1 ë³€ê²½ ë²”ìœ„ ë§¤íŠ¸ë¦­ìŠ¤

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        CODE CHANGE MATRIX                               â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                         â”‚
â”‚  Backend (backend/src/)                                                â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ â”‚
â”‚  api/v1/                                                               â”‚
â”‚  â”œâ”€â”€ auth.py           [â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–‘â–‘] 80% ì¬êµ¬í˜„ (Jellyfin ì¸ì¦)        â”‚
â”‚  â”œâ”€â”€ catalogs.py       [â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ] 100% ì¬êµ¬í˜„ (Jellyfin Library)    â”‚
â”‚  â”œâ”€â”€ contents.py       [â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ] 100% ì¬êµ¬í˜„ (Jellyfin Item)       â”‚
â”‚  â”œâ”€â”€ search.py         [â–ˆâ–ˆâ–ˆâ–ˆâ–‘â–‘â–‘â–‘â–‘â–‘] 40% ìˆ˜ì • (Jellyfin + MeiliSearch) â”‚
â”‚  â”œâ”€â”€ stream.py         [â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ] 100% ì¬êµ¬í˜„ (Jellyfin Proxy)      â”‚
â”‚  â””â”€â”€ users.py          [â–ˆâ–ˆâ–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘] 20% ìˆ˜ì • (Jellyfin ì—°ë™)          â”‚
â”‚                                                                         â”‚
â”‚  models/                                                               â”‚
â”‚  â”œâ”€â”€ user.py           [â–ˆâ–ˆâ–ˆâ–ˆâ–‘â–‘â–‘â–‘â–‘â–‘] 40% ë‹¨ìˆœí™”                        â”‚
â”‚  â”œâ”€â”€ catalog.py        [â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€] ì œê±°                              â”‚
â”‚  â”œâ”€â”€ series.py         [â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€] ì œê±°                              â”‚
â”‚  â”œâ”€â”€ content.py        [â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€] ì œê±°                              â”‚
â”‚  â”œâ”€â”€ file.py           [â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€] ì œê±°                              â”‚
â”‚  â”œâ”€â”€ hand.py           [â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘] 0% ìœ ì§€                           â”‚
â”‚  â””â”€â”€ player.py         [â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘] 0% ìœ ì§€                           â”‚
â”‚                                                                         â”‚
â”‚  services/                                                             â”‚
â”‚  â”œâ”€â”€ search.py         [â–ˆâ–ˆâ–ˆâ–ˆâ–‘â–‘â–‘â–‘â–‘â–‘] 40% ìˆ˜ì •                          â”‚
â”‚  â”œâ”€â”€ streaming.py      [â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€] ì œê±° (Jellyfin ëŒ€ì²´)              â”‚
â”‚  â””â”€â”€ jellyfin.py       [++++++++++] ì‹ ê·œ ì¶”ê°€                         â”‚
â”‚                                                                         â”‚
â”‚  Frontend (frontend/src/)                                              â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ â”‚
â”‚  lib/api/                                                              â”‚
â”‚  â”œâ”€â”€ client.ts         [â–ˆâ–ˆâ–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘] 20% ìˆ˜ì •                          â”‚
â”‚  â””â”€â”€ jellyfin.ts       [++++++++++] ì‹ ê·œ ì¶”ê°€                         â”‚
â”‚                                                                         â”‚
â”‚  lib/stores/                                                           â”‚
â”‚  â””â”€â”€ auth.svelte.ts    [â–ˆâ–ˆâ–ˆâ–ˆâ–‘â–‘â–‘â–‘â–‘â–‘] 40% ìˆ˜ì • (Jellyfin í† í°)          â”‚
â”‚                                                                         â”‚
â”‚  routes/                                                               â”‚
â”‚  â”œâ”€â”€ browse/           [â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–‘â–‘] 80% ì¬êµ¬í˜„                        â”‚
â”‚  â”œâ”€â”€ catalog/          [â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–‘â–‘â–‘â–‘] 60% ìˆ˜ì •                          â”‚
â”‚  â”œâ”€â”€ watch/            [â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–‘â–‘] 80% ì¬êµ¬í˜„ (Jellyfin í”Œë ˆì´ì–´)    â”‚
â”‚  â””â”€â”€ (ê¸°íƒ€)            [â–ˆâ–ˆâ–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘] 20% ìˆ˜ì •                          â”‚
â”‚                                                                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 4.2 ì‹ ê·œ íŒŒì¼ ëª©ë¡

| íŒŒì¼ | ì—­í•  | ì˜ˆìƒ LOC |
|------|------|---------|
| `backend/src/services/jellyfin.py` | Jellyfin API í´ë¼ì´ì–¸íŠ¸ | ~300 |
| `backend/src/schemas/jellyfin.py` | Jellyfin ì‘ë‹µ ìŠ¤í‚¤ë§ˆ | ~150 |
| `backend/src/models/jellyfin_mapping.py` | ID ë§¤í•‘ í…Œì´ë¸” | ~50 |
| `frontend/src/lib/api/jellyfin.ts` | Jellyfin TS í´ë¼ì´ì–¸íŠ¸ | ~200 |
| `frontend/src/lib/components/player/JellyfinPlayer.svelte` | Jellyfin í”Œë ˆì´ì–´ ë˜í¼ | ~150 |

### 4.3 ì œê±° íŒŒì¼ ëª©ë¡

| íŒŒì¼ | ì´ìœ  |
|------|------|
| `backend/src/services/streaming.py` | Jellyfin íŠ¸ëœìŠ¤ì½”ë”©ìœ¼ë¡œ ëŒ€ì²´ |
| `backend/src/services/migration.py` | Jellyfin ë°ì´í„° ì†ŒìŠ¤ë¡œ ëŒ€ì²´ |
| `backend/src/models/catalog.py` | Jellyfin Libraryë¡œ ëŒ€ì²´ |
| `backend/src/models/series.py` | Jellyfin Collectionìœ¼ë¡œ ëŒ€ì²´ |
| `backend/src/models/content.py` | Jellyfin Itemìœ¼ë¡œ ëŒ€ì²´ |
| `backend/src/models/file.py` | Jellyfin MediaInfoë¡œ ëŒ€ì²´ |
| `backend/Dockerfile.migrator` | ë§ˆì´ê·¸ë ˆì´ì…˜ ë¶ˆí•„ìš” |

---

## 5. ë¸”ë¡í™” ì¶©ëŒ ë¶„ì„

### 5.1 í˜„ì¬ ë¸”ë¡ êµ¬ì¡° (Block Agent System)

```
í˜„ì¬ WSOPTV ë¸”ë¡ êµ¬ì¡°:
â”œâ”€â”€ auth (ì¸ì¦ ë„ë©”ì¸)
â”‚   â”œâ”€â”€ auth.validate
â”‚   â”œâ”€â”€ auth.token
â”‚   â””â”€â”€ auth.session
â”œâ”€â”€ content (ì½˜í…ì¸  ë„ë©”ì¸)
â”‚   â”œâ”€â”€ content.query
â”‚   â”œâ”€â”€ content.cache
â”‚   â””â”€â”€ content.response
â”œâ”€â”€ stream (ìŠ¤íŠ¸ë¦¬ë° ë„ë©”ì¸)
â”‚   â”œâ”€â”€ stream.transcode
â”‚   â”œâ”€â”€ stream.deliver
â”‚   â””â”€â”€ stream.monitor
â”œâ”€â”€ search (ê²€ìƒ‰ ë„ë©”ì¸)
â”‚   â”œâ”€â”€ search.index
â”‚   â”œâ”€â”€ search.query
â”‚   â””â”€â”€ search.suggest
â””â”€â”€ player (í”Œë ˆì´ì–´ ë„ë©”ì¸)
    â”œâ”€â”€ player.profile
    â””â”€â”€ player.stats
```

### 5.2 Jellyfin ì „í™˜ ì‹œ ë¸”ë¡ ë³€ê²½

```diff
 Jellyfin ì „í™˜ í›„ ë¸”ë¡ êµ¬ì¡°:
 â”œâ”€â”€ auth (ì¸ì¦ ë„ë©”ì¸)
-â”‚   â”œâ”€â”€ auth.validate      â†’ jellyfin.auth
-â”‚   â”œâ”€â”€ auth.token         â†’ jellyfin.auth
+â”‚   â””â”€â”€ auth.jellyfin      # Jellyfin ì¸ì¦ ìœ„ì„
 â”‚
 â”œâ”€â”€ content (ì½˜í…ì¸  ë„ë©”ì¸)
-â”‚   â”œâ”€â”€ content.query      â†’ jellyfin.library
-â”‚   â”œâ”€â”€ content.cache      â†’ redis ìºì‹± (ìœ ì§€)
-â”‚   â””â”€â”€ content.response   â†’ í†µí•© ì‘ë‹µ (ìœ ì§€)
+â”‚   â”œâ”€â”€ content.jellyfin   # Jellyfin API ë˜í¼
+â”‚   â”œâ”€â”€ content.cache      # Redis ìºì‹± (ìœ ì§€)
+â”‚   â””â”€â”€ content.merge      # í¬ì»¤ ë©”íƒ€ ë³‘í•©
 â”‚
-â”œâ”€â”€ stream (ìŠ¤íŠ¸ë¦¬ë° ë„ë©”ì¸) â†’ ì œê±° (Jellyfin ëŒ€ì²´)
-â”‚   â”œâ”€â”€ stream.transcode
-â”‚   â”œâ”€â”€ stream.deliver
-â”‚   â””â”€â”€ stream.monitor
+â”œâ”€â”€ stream (ìŠ¤íŠ¸ë¦¬ë° ë„ë©”ì¸) â†’ Jellyfin ìœ„ì„
+â”‚   â””â”€â”€ stream.proxy       # Jellyfin URL í”„ë¡ì‹œ
 â”‚
 â”œâ”€â”€ search (ê²€ìƒ‰ ë„ë©”ì¸) â†’ ìœ ì§€
 â”‚   â”œâ”€â”€ search.index       # MeiliSearch (ìœ ì§€)
 â”‚   â”œâ”€â”€ search.query       # í†µí•© ê²€ìƒ‰ (ìœ ì§€)
 â”‚   â””â”€â”€ search.suggest     # ìë™ì™„ì„± (ìœ ì§€)
 â”‚
 â””â”€â”€ poker (í¬ì»¤ ë„ë©”ì¸) â†’ ì‹ ê·œ ë¶„ë¦¬
     â”œâ”€â”€ poker.hand         # í•¸ë“œ ë©”íƒ€ë°ì´í„°
     â”œâ”€â”€ poker.player       # í”Œë ˆì´ì–´ í†µê³„
     â””â”€â”€ poker.timeline     # íƒ€ì„ì½”ë“œ ê´€ë¦¬
```

### 5.3 ì¶©ëŒ ë¶„ì„ ê²°ê³¼

| ë¸”ë¡ | ì¶©ëŒ ì—¬ë¶€ | ì˜í–¥ | í•´ê²° ë°©ë²• |
|------|----------|------|----------|
| `auth.*` | âš ï¸ ê²½ê³„ ì¬ì •ì˜ | ë†’ìŒ | `auth.jellyfin` ë‹¨ì¼ ë¸”ë¡ìœ¼ë¡œ í†µí•© |
| `content.*` | âš ï¸ ë°ì´í„° ì†ŒìŠ¤ ë³€ê²½ | ë†’ìŒ | Jellyfin API + í¬ì»¤ ë©”íƒ€ ë³‘í•© ë ˆì´ì–´ |
| `stream.*` | ğŸ”´ ì™„ì „ ëŒ€ì²´ | ë†’ìŒ | ë¸”ë¡ ì œê±°, Jellyfin í”„ë¡ì‹œë¡œ ëŒ€ì²´ |
| `search.*` | âœ… í˜¸í™˜ | ë‚®ìŒ | ì¸ë±ì‹± ì†ŒìŠ¤ë§Œ ë³€ê²½ |
| `player.*` | âœ… ë…ë¦½ | ì—†ìŒ | `poker.*`ë¡œ ì´ë¦„ ë³€ê²½ë§Œ |

### 5.4 ë¸”ë¡ ì˜ì¡´ì„± ê·¸ë˜í”„ ë³€ê²½

```
[ë³€ê²½ ì „]
auth.validate â”€â”€â–¶ auth.token â”€â”€â–¶ content.query â”€â”€â–¶ stream.transcode
                                       â”‚
                                       â–¼
                                 search.query

[ë³€ê²½ í›„]
auth.jellyfin â”€â”€â–¶ content.jellyfin â”€â”€â–¶ stream.proxy (Jellyfin URL)
                        â”‚
                        â”œâ”€â”€â–¶ poker.hand
                        â”‚
                        â””â”€â”€â–¶ search.query (MeiliSearch)
```

---

## 6. ì—ì´ì „íŠ¸ í•„ìš” ê²€í† 

### 6.1 í˜„ì¬ ì—ì´ì „íŠ¸ êµ¬ì¡°

| ì—ì´ì „íŠ¸ | ë‹´ë‹¹ ë¸”ë¡ | Jellyfin ì „í™˜ ì˜í–¥ |
|---------|---------|------------------|
| `auth-agent` | auth.* | ğŸ”„ ì¬ì •ì˜ í•„ìš” |
| `content-agent` | content.* | ğŸ”„ ì¬ì •ì˜ í•„ìš” |
| `stream-agent` | stream.* | âŒ ì œê±° |
| `search-agent` | search.* | âœ… ìœ ì§€ |
| `player-agent` | player.* | ğŸ”„ `poker-agent`ë¡œ ë³€ê²½ |

### 6.2 ì‹ ê·œ ì—ì´ì „íŠ¸ ì œì•ˆ

```yaml
# ì‹ ê·œ: Jellyfin Integration Agent
jellyfin-agent:
  description: Jellyfin API í†µí•© ì „ë‹´
  blocks:
    - jellyfin.auth       # ì¸ì¦ ìœ„ì„
    - jellyfin.library    # ë¼ì´ë¸ŒëŸ¬ë¦¬ ì¡°íšŒ
    - jellyfin.item       # ì•„ì´í…œ ìƒì„¸
    - jellyfin.playback   # ì¬ìƒ ì •ë³´
  dependencies:
    - redis (ìºì‹±)
    - postgres (ID ë§¤í•‘)

# ë³€ê²½: Poker Metadata Agent
poker-agent:
  description: í¬ì»¤ íŠ¹í™” ë©”íƒ€ë°ì´í„° ê´€ë¦¬
  blocks:
    - poker.hand          # í•¸ë“œ ì •ë³´
    - poker.player        # í”Œë ˆì´ì–´ í†µê³„
    - poker.timeline      # íƒ€ì„ì½”ë“œ
  dependencies:
    - postgres (ë©”íƒ€ ì €ì¥)
    - meilisearch (ì¸ë±ì‹±)

# ìœ ì§€: Search Agent
search-agent:
  description: í†µí•© ê²€ìƒ‰ (Jellyfin + Poker)
  blocks:
    - search.index
    - search.query
    - search.suggest
```

### 6.3 ì—ì´ì „íŠ¸ í†µì‹  íŒ¨í„´

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    AGENT COMMUNICATION PATTERN                       â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                      â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                                   â”‚
â”‚  â”‚ Orchestrator â”‚                                                   â”‚
â”‚  â”‚    Agent     â”‚                                                   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜                                                   â”‚
â”‚         â”‚                                                            â”‚
â”‚         â”‚  1. ì½˜í…ì¸  ìš”ì²­                                            â”‚
â”‚         â–¼                                                            â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      2. Jellyfin API      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”‚
â”‚  â”‚   Jellyfin   â”‚â—€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¶â”‚   Jellyfin    â”‚       â”‚
â”‚  â”‚    Agent     â”‚                           â”‚    Server     â”‚       â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜                           â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜       â”‚
â”‚         â”‚                                                            â”‚
â”‚         â”‚  3. í¬ì»¤ ë©”íƒ€ ìš”ì²­                                         â”‚
â”‚         â–¼                                                            â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      4. PostgreSQL        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”‚
â”‚  â”‚    Poker     â”‚â—€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¶â”‚   Database    â”‚       â”‚
â”‚  â”‚    Agent     â”‚                           â”‚  (poker_meta) â”‚       â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜                           â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜       â”‚
â”‚         â”‚                                                            â”‚
â”‚         â”‚  5. ê²€ìƒ‰ ì¸ë±ì‹±                                            â”‚
â”‚         â–¼                                                            â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      6. MeiliSearch       â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”‚
â”‚  â”‚   Search     â”‚â—€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¶â”‚  MeiliSearch  â”‚       â”‚
â”‚  â”‚    Agent     â”‚                           â”‚    Server     â”‚       â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                           â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜       â”‚
â”‚                                                                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 7. ë§ˆì´ê·¸ë ˆì´ì…˜ ë¡œë“œë§µ

### 7.1 Phase ê°œìš”

```
Phase 0        Phase 1        Phase 2        Phase 3        Phase 4
ì¤€ë¹„           Jellyfin       ë°±ì—”ë“œ         í”„ë¡ íŠ¸ì—”ë“œ     ì•ˆì •í™”
(1ì£¼)          ì„¤ì¹˜ (1ì£¼)     í†µí•© (3ì£¼)     í†µí•© (2ì£¼)     (1ì£¼)
  â”‚              â”‚              â”‚              â”‚              â”‚
  â–¼              â–¼              â–¼              â–¼              â–¼
â”Œâ”€â”€â”€â”€â”        â”Œâ”€â”€â”€â”€â”        â”Œâ”€â”€â”€â”€â”        â”Œâ”€â”€â”€â”€â”        â”Œâ”€â”€â”€â”€â”
â”‚ë¶„ì„â”‚â”€â”€â”€â”€â”€â”€â”€â–¶â”‚ì„¤ì¹˜â”‚â”€â”€â”€â”€â”€â”€â”€â–¶â”‚API â”‚â”€â”€â”€â”€â”€â”€â”€â–¶â”‚UI  â”‚â”€â”€â”€â”€â”€â”€â”€â–¶â”‚QA  â”‚
â”‚ì„¤ê³„â”‚        â”‚ì„¤ì •â”‚        â”‚í†µí•©â”‚        â”‚í†µí•©â”‚        â”‚ë°°í¬â”‚
â””â”€â”€â”€â”€â”˜        â””â”€â”€â”€â”€â”˜        â””â”€â”€â”€â”€â”˜        â””â”€â”€â”€â”€â”˜        â””â”€â”€â”€â”€â”˜
```

### 7.2 ìƒì„¸ íƒœìŠ¤í¬

#### Phase 0: ì¤€ë¹„ (1ì£¼)

| Task | ë‹´ë‹¹ | ì‚°ì¶œë¬¼ |
|------|------|--------|
| Jellyfin í…ŒìŠ¤íŠ¸ í™˜ê²½ êµ¬ì¶• | DevOps | Jellyfin ì»¨í…Œì´ë„ˆ |
| API ë¬¸ì„œ ë¶„ì„ | Backend | API ëª…ì„¸ ì •ë¦¬ |
| ë°ì´í„° ë§¤í•‘ ì„¤ê³„ | Backend | ë§¤í•‘ ìŠ¤í‚¤ë§ˆ |
| ë¸”ë¡ ì¬ì •ì˜ | Architect | ë¸”ë¡ ì •ì˜ì„œ ì—…ë°ì´íŠ¸ |

#### Phase 1: Jellyfin ì„¤ì¹˜ (1ì£¼)

| Task | ë‹´ë‹¹ | ì‚°ì¶œë¬¼ |
|------|------|--------|
| NASì— Jellyfin ì„¤ì¹˜ | DevOps | ìš´ì˜ ì„œë²„ |
| ë¼ì´ë¸ŒëŸ¬ë¦¬ ì„¤ì • (WSOP, HCL, PAD) | DevOps | ë¼ì´ë¸ŒëŸ¬ë¦¬ êµ¬ì„± |
| ì‚¬ìš©ì ê³„ì • ë§ˆì´ê·¸ë ˆì´ì…˜ | Backend | ì‚¬ìš©ì ë™ê¸°í™” |
| íŠ¸ëœìŠ¤ì½”ë”© ì„¤ì • | DevOps | HW ê°€ì† ì„¤ì • |

#### Phase 2: ë°±ì—”ë“œ í†µí•© (3ì£¼)

| Task | ë‹´ë‹¹ | ì‚°ì¶œë¬¼ |
|------|------|--------|
| `jellyfin.py` í´ë¼ì´ì–¸íŠ¸ | Backend | Jellyfin API ë˜í¼ |
| ì¸ì¦ í†µí•© (`auth.py`) | Backend | Jellyfin ì¸ì¦ |
| ì½˜í…ì¸  API (`catalogs.py`, `contents.py`) | Backend | Jellyfin ë§¤í•‘ |
| ìŠ¤íŠ¸ë¦¬ë° í”„ë¡ì‹œ (`stream.py`) | Backend | URL í”„ë¡ì‹œ |
| í¬ì»¤ ë©”íƒ€ ë¶„ë¦¬ | Backend | `poker/` ëª¨ë“ˆ |
| ê²€ìƒ‰ í†µí•© | Backend | MeiliSearch ì¸ë±ì‹± |

#### Phase 3: í”„ë¡ íŠ¸ì—”ë“œ í†µí•© (2ì£¼)

| Task | ë‹´ë‹¹ | ì‚°ì¶œë¬¼ |
|------|------|--------|
| Jellyfin TS í´ë¼ì´ì–¸íŠ¸ | Frontend | `jellyfin.ts` |
| ì¸ì¦ ìŠ¤í† ì–´ ìˆ˜ì • | Frontend | Jellyfin í† í° |
| ì½˜í…ì¸  í˜ì´ì§€ ì—…ë°ì´íŠ¸ | Frontend | ë¼ìš°íŠ¸ ìˆ˜ì • |
| ë¹„ë””ì˜¤ í”Œë ˆì´ì–´ í†µí•© | Frontend | Jellyfin HLS |
| í•¸ë“œ íƒ€ì„ë¼ì¸ ì—°ë™ | Frontend | íƒ€ì„ì½”ë“œ UI |

#### Phase 4: ì•ˆì •í™” (1ì£¼)

| Task | ë‹´ë‹¹ | ì‚°ì¶œë¬¼ |
|------|------|--------|
| E2E í…ŒìŠ¤íŠ¸ | QA | í…ŒìŠ¤íŠ¸ ë¦¬í¬íŠ¸ |
| ì„±ëŠ¥ í…ŒìŠ¤íŠ¸ | DevOps | ë²¤ì¹˜ë§ˆí¬ |
| ë¬¸ì„œ ì—…ë°ì´íŠ¸ | All | CLAUDE.md, LLD |
| í”„ë¡œë•ì…˜ ë°°í¬ | DevOps | ìš´ì˜ í™˜ê²½ |

### 7.3 ë§ˆì¼ìŠ¤í†¤

```
Week 1  â”€â”€â–¶  Jellyfin ì„¤ì¹˜ ì™„ë£Œ, API í…ŒìŠ¤íŠ¸ í†µê³¼
Week 2  â”€â”€â–¶  ë°±ì—”ë“œ ì¸ì¦/ì½˜í…ì¸  API ì™„ë£Œ
Week 3  â”€â”€â–¶  ìŠ¤íŠ¸ë¦¬ë° í”„ë¡ì‹œ, í¬ì»¤ ë©”íƒ€ ë¶„ë¦¬ ì™„ë£Œ
Week 4  â”€â”€â–¶  í”„ë¡ íŠ¸ì—”ë“œ í†µí•© ì™„ë£Œ
Week 5  â”€â”€â–¶  E2E í…ŒìŠ¤íŠ¸ í†µê³¼
Week 6  â”€â”€â–¶  í”„ë¡œë•ì…˜ ë°°í¬
```

---

## 8. ë¦¬ìŠ¤í¬ ë¶„ì„

### 8.1 ê¸°ìˆ ì  ë¦¬ìŠ¤í¬

| ë¦¬ìŠ¤í¬ | í™•ë¥  | ì˜í–¥ | ì™„í™” ë°©ë²• |
|--------|------|------|----------|
| Jellyfin API ë³€ê²½ | ì¤‘ | ë†’ìŒ | SDK ë²„ì „ ê³ ì •, ì¶”ìƒí™” ë ˆì´ì–´ |
| NAS ì„±ëŠ¥ ì €í•˜ | ë‚®ìŒ | ì¤‘ | ìºì‹±, CDN ê²€í†  |
| í¬ì»¤ ë©”íƒ€ ë§ˆì´ê·¸ë ˆì´ì…˜ ì‹¤íŒ¨ | ë‚®ìŒ | ë†’ìŒ | ë°±ì—…, ë¡¤ë°± ê³„íš |
| ì‚¬ìš©ì ì¸ì¦ ë¶ˆì¼ì¹˜ | ì¤‘ | ì¤‘ | ë‹¨ê³„ì  ë§ˆì´ê·¸ë ˆì´ì…˜ |
| **Jellyfin DB ë§ˆì´ê·¸ë ˆì´ì…˜ ì‹¤íŒ¨** | ğŸ”´ ë†’ìŒ | ğŸ”´ ì¹˜ëª…ì  | 10.10.7 ê²½ìœ  í•„ìˆ˜, ë°±ì—… í›„ ì§„í–‰ |
| **ë©”ëª¨ë¦¬ ì‚¬ìš©ëŸ‰ ê¸‰ì¦** | ì¤‘ | ì¤‘ | RAM ìš”êµ¬ì‚¬í•­ ì¬ì‚°ì • (ìµœì†Œ 8GB ê¶Œì¥) |
| **ëŒ€ìš©ëŸ‰ ë¼ì´ë¸ŒëŸ¬ë¦¬ ë§ˆì´ê·¸ë ˆì´ì…˜ ì§€ì—°** | ì¤‘ | ì¤‘ | ì•¼ê°„ ìˆ˜í–‰, ì¤‘ë‹¨ ê¸ˆì§€, ëª¨ë‹ˆí„°ë§ |

#### 8.1.1 Jellyfin ë²„ì „ ì—…ê·¸ë ˆì´ë“œ ê²½ë¡œ (Critical)

> âš ï¸ **ì£¼ì˜**: Jellyfin 10.11.xëŠ” DB êµ¬ì¡°ê°€ ì™„ì „íˆ ë³€ê²½ë˜ì—ˆìŠµë‹ˆë‹¤.

```
[ê¶Œì¥ ì—…ê·¸ë ˆì´ë“œ ê²½ë¡œ]
Fresh Install â†’ 10.11.x (ì‹ ê·œ ì„¤ì¹˜ ê¶Œì¥) âœ…

[ê¸°ì¡´ ì„¤ì¹˜ ì—…ê·¸ë ˆì´ë“œ]
10.10.7 â†’ 10.11.x (ì •ìƒ)
10.8.x â†’ 10.10.7 â†’ 10.11.x (í•„ìˆ˜ ê²½ìœ )
10.8.x â†’ 10.11.x (âŒ ì‹¤íŒ¨ - ë²„ì „ ìŠ¤í‚µ ë¶ˆê°€)
```

**ì•Œë ¤ì§„ ë§ˆì´ê·¸ë ˆì´ì…˜ ì´ìŠˆ** (2024-2025):
- [Database Migration Failed](https://github.com/jellyfin/jellyfin/issues/15027) - "no such table: ActivityLog"
- [Duplicate Key Error](https://github.com/jellyfin/jellyfin/issues/15147) - ì™¸ë˜í‚¤ ì¶©ëŒ
- [Missing LUFS Column](https://github.com/jellyfin/jellyfin/issues/13049) - ë²„ì „ ìŠ¤í‚µ ì‹œ ë°œìƒ

**ê¶Œì¥ì‚¬í•­**:
1. âœ… **ì‹ ê·œ ì„¤ì¹˜ ê¶Œì¥** - 18TB ë¼ì´ë¸ŒëŸ¬ë¦¬ëŠ” ì‹ ê·œ ìŠ¤ìº”ì´ ë” ì•ˆì „
2. ğŸ“¦ ë§ˆì´ê·¸ë ˆì´ì…˜ ì „ ë°˜ë“œì‹œ `library.db`, `jellyfin.db` ë°±ì—…
3. â° ë§ˆì´ê·¸ë ˆì´ì…˜ ìˆ˜ ì‹œê°„ ì†Œìš” ê°€ëŠ¥ - ì¤‘ë‹¨ ê¸ˆì§€
4. ğŸ”„ ë§ˆì´ê·¸ë ˆì´ì…˜ í›„ ì „ì²´ ë¼ì´ë¸ŒëŸ¬ë¦¬ ìŠ¤ìº” í•„ìˆ˜

#### 8.1.2 ë©”ëª¨ë¦¬ ìš”êµ¬ì‚¬í•­ ë³€ê²½

| í•­ëª© | ê¸°ì¡´ (Docker) | Jellyfin 10.11+ |
|------|---------------|-----------------|
| ê¸°ë³¸ RAM | 2GB | 4GB+ |
| ëŒ€ìš©ëŸ‰ ë¼ì´ë¸ŒëŸ¬ë¦¬ (2,500+) | 4GB | **8GB+ ê¶Œì¥** |
| ë™ì‹œ íŠ¸ëœìŠ¤ì½”ë”© | +1GB/stream | +1GB/stream |

> Jellyfin 10.11+ëŠ” ê³µê²©ì  ë©”ëª¨ë¦¬ ìºì‹±ìœ¼ë¡œ ë¼ì´ë¸ŒëŸ¬ë¦¬ DB í¬ê¸°ë§Œí¼ ì¶”ê°€ RAM ì‚¬ìš©

### 8.2 ë¹„ì¦ˆë‹ˆìŠ¤ ë¦¬ìŠ¤í¬

| ë¦¬ìŠ¤í¬ | í™•ë¥  | ì˜í–¥ | ì™„í™” ë°©ë²• |
|--------|------|------|----------|
| ê°œë°œ ì¼ì • ì´ˆê³¼ | ì¤‘ | ì¤‘ | ë²„í¼ ê¸°ê°„ (1ì£¼) |
| ê¸°ì¡´ ê¸°ëŠ¥ ì†ì‹¤ | ë‚®ìŒ | ë†’ìŒ | ê¸°ëŠ¥ ì²´í¬ë¦¬ìŠ¤íŠ¸ |
| ì‚¬ìš©ì ë¶ˆí¸ | ë‚®ìŒ | ì¤‘ | ì ì§„ì  ë¡¤ì•„ì›ƒ |

### 8.3 ë¡¤ë°± ê³„íš

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                     ROLLBACK STRATEGY                        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                              â”‚
â”‚  1. ë°ì´í„° ë°±ì—…                                              â”‚
â”‚     â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ â”‚
â”‚     â€¢ PostgreSQL ì „ì²´ ë¤í”„ (ë§¤ì¼)                           â”‚
â”‚     â€¢ pokervod.db ì›ë³¸ ë³´ì¡´                                 â”‚
â”‚     â€¢ MeiliSearch ì¸ë±ìŠ¤ ìŠ¤ëƒ…ìƒ·                             â”‚
â”‚     â€¢ Jellyfin library.db, jellyfin.db ë°±ì—…                â”‚
â”‚     â€¢ Jellyfin config í´ë” ì „ì²´ ë°±ì—…                        â”‚
â”‚                                                              â”‚
â”‚  2. ì½”ë“œ ë²„ì „ ê´€ë¦¬                                           â”‚
â”‚     â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ â”‚
â”‚     â€¢ `main` ë¸Œëœì¹˜ ë³´í˜¸                                    â”‚
â”‚     â€¢ `feat/jellyfin-migration` ë¸Œëœì¹˜ì—ì„œ ì‘ì—…             â”‚
â”‚     â€¢ ê° Phase ì™„ë£Œ ì‹œ íƒœê·¸ ìƒì„±                            â”‚
â”‚                                                              â”‚
â”‚  3. ë¡¤ë°± íŠ¸ë¦¬ê±°                                              â”‚
â”‚     â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ â”‚
â”‚     â€¢ E2E í…ŒìŠ¤íŠ¸ ì‹¤íŒ¨ìœ¨ > 20%                               â”‚
â”‚     â€¢ ìŠ¤íŠ¸ë¦¬ë° ì˜¤ë¥˜ìœ¨ > 5%                                  â”‚
â”‚     â€¢ ì‚¬ìš©ì ë¶ˆë§Œ ê¸‰ì¦                                       â”‚
â”‚                                                              â”‚
â”‚  4. ë¡¤ë°± ì‹¤í–‰                                                â”‚
â”‚     â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ â”‚
â”‚     â€¢ `git revert` ë˜ëŠ” ì´ì „ íƒœê·¸ ë°°í¬                      â”‚
â”‚     â€¢ PostgreSQL ë³µì›                                        â”‚
â”‚     â€¢ Docker ì»¨í…Œì´ë„ˆ ì´ì „ ë²„ì „ìœ¼ë¡œ êµì²´                    â”‚
â”‚                                                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 9. ê²°ì • ì‚¬í•­

### 9.1 ìŠ¹ì¸ í•­ëª©

| í•­ëª© | ì„¤ëª… | ê²°ì • |
|------|------|------|
| **Jellyfin ë„ì…** | Docker â†’ Jellyfin ì „í™˜ | âœ… ìŠ¹ì¸ (2025-12-09) |
| **ê°œë°œ ì¼ì •** | 8ì£¼ (ë²„í¼ í¬í•¨) | âœ… ìŠ¹ì¸ (2025-12-09) |
| **ë¸”ë¡ ì¬ì •ì˜** | stream ì œê±°, poker ì‹ ì„¤ | âœ… ìŠ¹ì¸ (2025-12-09) |
| **ì—ì´ì „íŠ¸ ì¶”ê°€** | jellyfin-agent, poker-agent ì‹ ì„¤ | âœ… ìŠ¹ì¸ (2025-12-09) |

### 9.2 ë‹¤ìŒ ë‹¨ê³„

1. âœ… **Phase 0 ì‹œì‘**: Jellyfin í…ŒìŠ¤íŠ¸ í™˜ê²½ êµ¬ì¶•
2. ğŸ“‹ ë¸”ë¡ ì—ì´ì „íŠ¸ ì‹œìŠ¤í…œ ë¬¸ì„œ ì—…ë°ì´íŠ¸
3. ğŸ“‹ CLAUDE.md ì•„í‚¤í…ì²˜ ë°˜ì˜
4. ğŸ“‹ LLD ë¬¸ì„œ ì—…ë°ì´íŠ¸

---

## ì°¸ê³  ìë£Œ

### ê³µì‹ ë¬¸ì„œ
- [Jellyfin Documentation](https://jellyfin.org/docs/)
- [Jellyfin Migrating Guide](https://jellyfin.org/docs/general/administration/migrate/)
- [Jellyfin 10.11.0 Release Notes](https://jellyfin.org/posts/jellyfin-release-10.11.0/)

### API & SDK
- [Jellyfin API Authorization](https://gist.github.com/nielsvanvelzen/ea047d9028f676185832e51ffaf12a6f)
- [The Jellyfin API Overview](https://jmshrv.com/posts/jellyfin-api/)
- [Custom Metadata DB Plugin](https://github.com/arabcoders/jf-custom-metadata-db)
- [Jellyfin TypeScript SDK](https://typescript-sdk.jellyfin.org/)
- [Jellyfin Python Client](https://pypi.org/project/jellyfin-api-client/)

### ë§ˆì´ê·¸ë ˆì´ì…˜ ì´ìŠˆ (2024-2025)
- [Database Migration Failed (10.10â†’10.11)](https://github.com/jellyfin/jellyfin/issues/15027)
- [Duplicate Key Migration Error](https://github.com/jellyfin/jellyfin/issues/15147)
- [Migration from 10.8.13 fails](https://github.com/jellyfin/jellyfin/issues/13049)
- [Missing ActivityLog Table](https://github.com/jellyfin/jellyfin/issues/15158)

---

## 10. êµ¬í˜„ í˜„í™©

### 10.1 Phase ì§„í–‰ ìƒíƒœ

| Phase | ìƒíƒœ | ì™„ë£Œì¼ | ë¹„ê³  |
|-------|------|--------|------|
| Phase 0: ì¤€ë¹„ | âœ… ì™„ë£Œ | 2025-12-09 | Jellyfin ì„¤ì¹˜ ê°€ì´ë“œ ì‘ì„± |
| Phase 1: Jellyfin ì„¤ì¹˜ | âœ… ì™„ë£Œ | 2025-12-09 | Windows Native 10.11.4 |
| Phase 2: ë°±ì—”ë“œ í†µí•© | âœ… ì™„ë£Œ | 2025-12-10 | API í”„ë¡ì‹œ êµ¬í˜„, ë ˆê±°ì‹œ API ë¹„í™œì„±í™” |
| Phase 3: í”„ë¡ íŠ¸ì—”ë“œ í†µí•© | âœ… ì™„ë£Œ | 2025-12-10 | ë‹¨ì¼ ì•„í‚¤í…ì²˜ ë‹¬ì„±, ì¤‘ë³µ ë¼ìš°íŠ¸ ì œê±° |
| Phase 4: ì•ˆì •í™” | ğŸ”„ ì§„í–‰ ì¤‘ | - | E2E í…ŒìŠ¤íŠ¸, ë¬¸ì„œí™” |

### 10.2 í•´ê²°ëœ ì´ìŠˆ

#### 10.2.1 Docker ë„¤íŠ¸ì›Œí¬ URL ë¬¸ì œ (2025-12-10)

**ë¬¸ì œ**: Backendì—ì„œ ìƒì„±í•œ Jellyfin ìŠ¤íŠ¸ë¦¼ URLì´ ë¸Œë¼ìš°ì €ì—ì„œ ì ‘ê·¼ ë¶ˆê°€

```
ì›ì¸:
- Backendê°€ JELLYFIN_HOST=http://host.docker.internal:8096 ì‚¬ìš©
- ìŠ¤íŠ¸ë¦¼ URL: http://host.docker.internal:8096/Videos/{id}/stream.m3u8
- ë¸Œë¼ìš°ì €ëŠ” host.docker.internal DNS í•´ì„ ë¶ˆê°€
```

**í•´ê²°ì±…**: ë‚´ë¶€ í†µì‹ ìš© í˜¸ìŠ¤íŠ¸ì™€ ì™¸ë¶€ ë…¸ì¶œìš© í˜¸ìŠ¤íŠ¸ ë¶„ë¦¬

| í™˜ê²½ ë³€ìˆ˜ | ìš©ë„ | ì˜ˆì‹œ ê°’ |
|-----------|------|---------|
| `JELLYFIN_HOST` | Backend â†’ Jellyfin (Docker ë‚´ë¶€ í†µì‹ ) | `http://host.docker.internal:8096` |
| `JELLYFIN_BROWSER_HOST` | Browser â†’ Jellyfin (ì™¸ë¶€ ì ‘ê·¼ URL) | `http://localhost:8096` |

**ìˆ˜ì •ëœ íŒŒì¼**:

| íŒŒì¼ | ë³€ê²½ ë‚´ìš© |
|------|----------|
| `backend/src/core/config.py` | `JELLYFIN_BROWSER_HOST`, `JELLYFIN_PUBLIC_HOST` í”„ë¡œí¼í‹° ì¶”ê°€ |
| `backend/src/services/jellyfin.py` | ìŠ¤íŠ¸ë¦¼/ì¸ë„¤ì¼ URL ìƒì„± ì‹œ `public_host` ì‚¬ìš© |
| `backend/src/api/v1/jellyfin.py` | ê²€ìƒ‰ ê²°ê³¼ URL ë³€í™˜ ì‹œ `public_host` ì‚¬ìš© |
| `docker-compose.yml` | Jellyfin í™˜ê²½ ë³€ìˆ˜ ì¶”ê°€ |

**ì½”ë“œ ë³€ê²½ ìš”ì•½**:

```python
# config.py
JELLYFIN_HOST: str = "http://localhost:8096"  # Backend â†’ Jellyfin
JELLYFIN_BROWSER_HOST: str = ""  # Browser â†’ Jellyfin

@property
def JELLYFIN_PUBLIC_HOST(self) -> str:
    """ë¸Œë¼ìš°ì €ì—ì„œ ì ‘ê·¼ ê°€ëŠ¥í•œ Jellyfin í˜¸ìŠ¤íŠ¸ URL"""
    return self.JELLYFIN_BROWSER_HOST or self.JELLYFIN_HOST

# jellyfin.py (service)
def get_stream_url(self, item_id: str, ...) -> str:
    # âœ… public_host ì‚¬ìš© (ë¸Œë¼ìš°ì € ì ‘ê·¼ìš©)
    return f"{self.public_host}/Videos/{item_id}/stream.m3u8?..."
```

```yaml
# docker-compose.yml
backend:
  environment:
    JELLYFIN_HOST: ${JELLYFIN_HOST:-http://host.docker.internal:8096}
    JELLYFIN_BROWSER_HOST: ${JELLYFIN_BROWSER_HOST:-http://localhost:8096}
    JELLYFIN_API_KEY: ${JELLYFIN_API_KEY:-}
```

### 10.3 ì•Œë ¤ì§„ ì œí•œì‚¬í•­

| ì œí•œì‚¬í•­ | ì›ì¸ | í•´ê²° ë°©ì•ˆ |
|---------|------|----------|
| HLS ìŠ¤íŠ¸ë¦¬ë° ì‹œ CORS | Jellyfin ì§ì ‘ í˜¸ì¶œ | Backend í”„ë¡ì‹œ ë˜ëŠ” Jellyfin CORS ì„¤ì • |
| ë¼ì´ë¸ŒëŸ¬ë¦¬ ìŠ¤ìº” ì‹œê°„ | 18TB+ ëŒ€ìš©ëŸ‰ | ì•¼ê°„ ìŠ¤ìº”, ì ì§„ì  ì¶”ê°€ |

### 10.4 Phase 3 ì™„ë£Œ ë‚´ì—­ (2025-12-10)

#### ë‹¨ì¼ ì•„í‚¤í…ì²˜ ë‹¬ì„±

**Frontend ë³€ê²½ ì‚¬í•­**:
| ë³€ê²½ ìœ í˜• | íŒŒì¼/ë¼ìš°íŠ¸ | ë‚´ìš© |
|----------|------------|------|
| âœ… í†µí•© | `/routes/+page.svelte` | Jellyfin API ì‚¬ìš©, WSOPTV íˆì–´ë¡œ ìœ ì§€ |
| âœ… í†µí•© | `/routes/watch/[id]/+page.svelte` | Jellyfin ìŠ¤íŠ¸ë¦¬ë° + VideoPlayer ì»´í¬ë„ŒíŠ¸ |
| âœ… ê°„ì†Œí™” | `Header.svelte` | Home, Searchë§Œ ìœ ì§€, ë²„ì „ v0.2.0-jellyfin |
| âŒ ì œê±° | `/routes/browse` | ë ˆê±°ì‹œ (Jellyfin contentsë¡œ ëŒ€ì²´) |
| âŒ ì œê±° | `/routes/catalog/[id]` | ë ˆê±°ì‹œ (Jellyfin librariesë¡œ ëŒ€ì²´) |
| âŒ ì œê±° | `/routes/series/[id]` | ë ˆê±°ì‹œ |
| âŒ ì œê±° | `/routes/jellyfin/**` | ì¤‘ë³µ ì œê±° (í™ˆìœ¼ë¡œ í†µí•©) |
| âŒ ì œê±° | `/routes/player/[id]` | ì¤‘ë³µ ì œê±° |

**Backend ë³€ê²½ ì‚¬í•­**:
| ë³€ê²½ ìœ í˜• | ëª¨ë“ˆ | ë‚´ìš© |
|----------|------|------|
| âœ… í™œì„± | `jellyfin.py` | Jellyfin API í”„ë¡ì‹œ (ë©”ì¸) |
| âœ… í™œì„± | `auth.py` | ì¸ì¦ (ìœ ì§€) |
| âœ… í™œì„± | `users.py` | ì‚¬ìš©ì ê´€ë¦¬ (ìœ ì§€) |
| âœ… í™œì„± | `search.py` | MeiliSearch í†µí•© ê²€ìƒ‰ (ìœ ì§€) |
| â¸ï¸ ë¹„í™œì„± | `catalogs.py` | ë ˆê±°ì‹œ (ì½”ë“œ ìœ ì§€, ë¼ìš°í„° ë¹„í™œì„±) |
| â¸ï¸ ë¹„í™œì„± | `contents.py` | ë ˆê±°ì‹œ (ì½”ë“œ ìœ ì§€, ë¼ìš°í„° ë¹„í™œì„±) |
| â¸ï¸ ë¹„í™œì„± | `stream.py` | ë ˆê±°ì‹œ (ì½”ë“œ ìœ ì§€, ë¼ìš°í„° ë¹„í™œì„±) |

**API ì—”ë“œí¬ì¸íŠ¸ ë§¤í•‘**:
```
[Before - ì¤‘ë³µ ì‹œìŠ¤í…œ]
/api/v1/catalogs           â†’ PostgreSQL ì¹´íƒˆë¡œê·¸
/api/v1/contents           â†’ PostgreSQL ì½˜í…ì¸ 
/api/v1/stream/{id}        â†’ NAS HLS ìŠ¤íŠ¸ë¦¼
/api/v1/jellyfin/*         â†’ Jellyfin í”„ë¡ì‹œ

[After - ë‹¨ì¼ ì‹œìŠ¤í…œ]
/api/v1/jellyfin/contents  â†’ Jellyfin ì½˜í…ì¸  (ë©”ì¸)
/api/v1/jellyfin/stream    â†’ Jellyfin HLS ìŠ¤íŠ¸ë¦¼
/api/v1/jellyfin/libraries â†’ Jellyfin ë¼ì´ë¸ŒëŸ¬ë¦¬
/api/v1/search             â†’ MeiliSearch (ìœ ì§€)
```

### 10.5 ë‹¤ìŒ ì‘ì—…

- [ ] í¬ì»¤ í•¸ë“œ íƒ€ì„ë¼ì¸ ì—°ë™ (Jellyfin ID â†” í•¸ë“œ ë§¤í•‘)
- [ ] E2E í…ŒìŠ¤íŠ¸ ì‘ì„±
- [ ] ì„±ëŠ¥ ìµœì í™” (Redis ìºì‹±)
- [ ] MeiliSearch ì¸ë±ì‹± Jellyfin ì†ŒìŠ¤ ì „í™˜

---

**ë¬¸ì„œ ì‘ì„±**: Claude Code | **ê²€í†  í•„ìš”**: í”„ë¡œì íŠ¸ ì˜¤ë„ˆ
